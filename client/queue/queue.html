<template name='queue'>
  {{#if Template.subscriptionsReady}}
    {{#if haveActivePlayers}}
      {{#if amActivePlayer}}
        {{#if colorsPicked}}
          <h2 class='white'>Colors Have Not Been Picked</h2>
          {{> colorPicker}}
        {{/if}}
      {{/if}}

      {{#unless colorsPicked}}
        <div class='row'>
          {{#if amActivePlayer}}
            {{#if myTurn}}
              {{#if amWhite}}
                <h1 class='top white turn-label'><span class='versus'>{{players}}</span> <span class='turn-title'>&#9822; {{currentTurn}} turn</span></h1>
              {{else}}
                <h1 class='top black center'><span class='versus'>{{players}}</span> <span class='turn-title'>&#9822; <span class='white'>{{currentTurn}} turn</span></span></h1>
              {{/if}}
            {{else}}
              {{#if amWhite}}
                <h1 class='top black center'><span class='versus'>{{players}}</span> <span class='turn-title'>&#9822; <span class='white'>{{currentTurn}}'s turn</span></span></h1>
              {{else}}
                <h1 class='top white center'><span class='versus'>{{players}}</span><span class='turn-title'>&#9822; {{currentTurn}}'s turn</span></h1>
              {{/if}}
            {{/if}}
          {{else}}
            <h1 class='top white center'><span class='versus'>{{players}}</span> <span class='turn-title'>You are spectating a match!</span></h1>
          {{/if}}

          <div class='col-sm-12'>
            {{> board rows}}
            <div class='moves-chat'>
              <ul id='system-list'>
                {{#each m in system}}
                  <li class='system'>
                    {{m.text}}
                  </li>
                {{/each}}
              </ul>
            </div>
            {{#if amActivePlayer}}
              <button id='forfeit' class='btn btn-default'>Forfeit</button>
              <button id='offer-draw' class='btn btn-default'>Offer Draw</button>
              <span class='next-up'>{{nextUp}}</span>
            {{/if}}
          </div>

          <div class='col-sm-12'>
            {{> chat}}
          </div>
        </div>
      {{/unless}}
    {{/if}}
  {{/if}}
</template>

<template name='colorPicker'>
  <h3 class='white pickLabel'>Please pick a color</h3>

  <div class='btn-group'>
    {{#if whiteTaken}}
      <button id='white' class='btn btn-default'> White</button>
    {{/if}}
    {{#if blackTaken}}
      <button id='black' class='btn btn-default'> Black</button>
    {{/if}}
  </div>
</template>
