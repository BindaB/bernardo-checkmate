<template name='queue'>
  {{#if Template.subscriptionsReady}}
    {{#if haveActivePlayers}}
      {{#if amActivePlayer}}
        {{#if colorsPicked}}
          <h2 class='white'>Colors Have Not Been Picked</h2>
          {{> colorPicker}}
        {{/if}}
      {{/if}}

      {{#unless colorsPicked}}
        <div class='row no-select'>
          {{#if result}}
            <h1 class='top white center'>{{result}}</h1>
          {{else}}
            {{#if amActivePlayer}}
              {{#if myTurn}}
                {{#if amWhite}}
                  <h1 id='turn-label' class='top white center'>&#9822; {{currentTurn}} turn</h1>
                {{else}}
                  <h1 id='turn-label' class='top black center'>&#9822; <span class='white'>{{currentTurn}} turn</span></h1>
                {{/if}}
              {{else}}
                {{#if amWhite}}
                  <h1 id='turn-label' class='top black center'>&#9822; <span class='white'>{{currentTurn}}'s turn</span></h1>
                {{else}}
                  <h1 id='turn-label' class='top white center'>&#9822; {{currentTurn}}'s turn</h1>
                {{/if}}
              {{/if}}
            {{else}}
              <h1 id='turn-label' class='top white center'>&#9822; You are spectating a match!</h1>
            {{/if}}
          {{/if}}

          <div class='col-sm-12'>
            {{> board rows}}
          </div>

          <div class='col-sm-4'>
            {{#if amActivePlayer}}
              <button id='forfeit' class='btn btn-default'>Forfeit</button>
              <button id='offer-draw' class='btn btn-default'>Offer Draw</button>
            {{/if}}
            <h3 class='white movesLabel text-center'>Moves</h3>
            {{> moveList moves}}
          </div>

          <div class='col-sm-12'>
            {{> chat}}
          </div>
        </div>
      {{/unless}}
    {{/if}}
  {{/if}}
</template>

<template name='colorPicker'>
  <h3 class='white pickLabel'>Please pick a color</h3>

  <div class='btn-group'>
    {{#if whiteTaken}}
      <button id='white' class='btn btn-default'> White</button>
    {{/if}}
    {{#if blackTaken}}
      <button id='black' class='btn btn-default'> Black</button>
    {{/if}}
  </div>
</template>
